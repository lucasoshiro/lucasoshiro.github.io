---
title: "3D Printer"
excerpt: "Homemade 3D printer built using arduino"

header:
  image: /assets/images/hardware/2020-06-14-impressora_3d/hermione.jpg
  teaser: /assets/images/hardware/2020-06-14-impressora_3d/hermione.jpg

lang: en
path-pt_br: /hardware/2020-06-14-impressora_3d

---

### Introduction

Well, if you came here in this page, you already know what a 3d printer is. So,
I'm not going to present too much about this. Let's go to what matters!

In this project, that I did on my vacations, I built this FDM 3D printer. It has
the following features:

- Hot bed;
- G-code compatible;
- Open source and hardware;
- Bowden;
- Auto levelling;
- Graphical display;
- Interface in Portuguese;
- SD card;
- Games

This printer is a ~~copy~~ inspired by the 3d printer
[Cianof√≠cea](https://linux.ime.usp.br/~brunobra/3Dprinter.html), built by the 
member of Hardware Livre USP [Bruno](https://linux.ime.usp.br/~brunobra).

This post is also available in Portuguese in [Hardware Livre website](https://hardwarelivreusp.org/projetos/2020/06/19/impressora_3d/).

### Structure

The structure of this 3D printer is a laser-cutted MDF. It is a
[Graber i3](https://github.com/sgraber/Graber), based on Prusa i3, however,
it uses laser-cutted parts instead of printed ones.

To do this, I bought a 90cm x 1m MDF board, cutted into two halves that could
fit in a laser cutter. The resulting parts were painted using automotive spray,
in order to make them more waterproof.

That structure, however, is not compatible with the display that I'm
using. Then, I laser cutted another frame for that display, available 
[here](https://www.thingiverse.com/thing:1186465#Summary).

Each axis has a pair of 8mm steel bars. Here in Brazil, some parts of 3D
printers are overpriced, so, I didn't bought these ones as "3D printer bars". I
took some of them from junk ink-jet printers, and the rest I bought at local
stores as "8mm steel bars".

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/hermione1.jpg">
    <figcaption>Laser-cutted MDF structure</figcaption>
  </figure>
</div>

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/hermione2.jpg">
    <figcaption>Painted laser-cutted MDF structure</figcaption>
  </figure>
</div>

### Electronics

In the heart of the 3D printer there's an Arduino Mega and a RAMPS shield. The
RAMPS shield is used to control the electric components of a 3D printer.

Four DRV8825 drivers where plugged on the RAMPS. They are responsible for
controlling the stepper motors. Each driver controls one of the three axes of
the 3D printer, plus a fourth one for controlling the filament flow on the
extruder. The RAMPS shield also allows a second stepper motor for a second
extruder, however, I didn't use it as would only have one extruder.

A RepRap Full Graphics Display is also connected to the RAMPS shield, with a
rotary encoder that allows the user to control the interface and a SD card
slot. Unlinke another simpler displays, this one is capable of drawing figures
and it has a prettier interface than the ones the only show plain text. This
display also allows to play some games üòâ.

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/eletronicos.jpg">
    <figcaption>Eletronic parts. Blue: Arduino Mega; Red: RAMPS; Purple: DRV8825</figcaption>
  </figure>
</div>


### Stepper Motors

Five NEMA 17 were used. One for the X axis, one for the Y axis, two for Z axis
and one for the extruder. Those steppers should be plugged on the RAMPS shield
by the side of the corresponding drivers. The Z axis steppers share the same
driver.

When installing the stepper motors, we need to fine tune each driver in order to
provide the correct current. It needs to be done using a multimeter, turning the
potenciometer on the top of the driver. To do this, we need to read the
datasheet of the driver and the stepper and check what should the tension
between the metal screw of the potentiometer and the driver GND. Then we need to
turn that screw with the **the maximum care** to not let the probe escape and
short-circuit something. This can brick the Arduino (yeah, that happened to me).

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/nema.jpg">
        <figcaption> NEMA 17 steppers</figcaption>
  </figure>
</div>

### Power supply

A switching power supply provides a 12V output to the RAMPS shield. Then the
shield supplies power for the Arduino and other components. The Arduino itself
can be powered through USB (5V), and that's enough for powering the display and
the servo (I'll talk about it later), however, it is not capable of moving the
stepper motors and heat the bed and extruder.

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/fonte.jpg">
    <figcaption>Power supply</figcaption>
  </figure>
</div>


### Heating

During the printing, one of the steppers pushes the filament towards the
nozzle. Then the hot nozzle melts the filament and makes it exit through its
hole. The heating element and a thermistor are coupled to the heating block
where the nozzle is inserted. Above them, there's a heatsink and a cooler. Those
parts allow to control the temperature, that needs to be inside the recomended
range for the chosen material.

The heating bed allows better grip and better printer quality. Below it, a
thermistor is inserte. The heating bed acts a big resistor, which is powered
with 12V by the RAMPS. It is fixed over its base using four springs, each one
with a screw for leveling.

We cannot print directly over the heating bed: we need to use a piece of glass
over it as a base for printing. We can use a standard 3mm glass, in a shape that
fits over the heating bed without touching the screws.

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/tralhas.jpg">
    <figcaption>Heating bed, extruder, etc...</figcaption>
  </figure>
</div>

### Mechanical parts

The bed moves over the Y axis, the X axis moves over the Z axis, the extruder
moves over the X axis. The movement of those axes is guided by linear
bearings (LM8UU).

O movimento dos motores dos eixos X e Y √© transmitido atrav√©s de um conjunto de
correia dentada, polia e rolamento para cada um desses eixos. A correia n√£o deve
estar muito tensionada, e nem muito frouxa.

Quanto ao eixo Z, ele √© movimentado atrav√©s de de porcas que se locomovem
conforme o movimento das barras roscadas que s√£o presas aos dois motores de
passo desse eixo atrav√©s de dois acoplamentos flex√≠veis.

Da mesma forma que as barras lisas de a√ßo, esta barra roscada pode ser comprada
em lojas de parafuso ou de constru√ß√£o por um pre√ßo mais barato que as
espec√≠ficas para impressoras 3D.

Quanto ao sistema de movimenta√ß√£o do filamento, h√° um conjunto de uma alavanca
com uma mola e um rolamento que, juntos, pressionam o filamento contra uma polia
preso ao motor de passo da extrusora, que o empurra atrav√©s da mangueira do
bowden.

- Kit gadgets de impressora 3D: R$111,09

  - 12x Rolamento linear LM8UU
  - 2x polia GT2
  - 2m correia GT2
  - 5x Rolamentos
  - 2x acoplamentos 5mmx5mm

- Kit para extrusora (alavanca): R$60,00

- Barras roscadas 5mm: R$5,00

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/motor_filamento.jpg">
    <figcaption>Conjunto de movimenta√ß√£o do filamento</figcaption>
  </figure>
</div>


### Endstops

Os endstops servem para detectar que um eixo chegou no fim ou no come√ßo de seu
curso.

Devido ao formato da fonte que comprei, esta impressora tem o eixo X
espelhado em rela√ß√£o ao que normalmente √© usado para a Graber. Desta forma, a
montagem ficava mais limpa em usar um endstop no eixo X no fim de seu curso,
enquanto que nos eixos Y e Z o endstop indica o come√ßo do curso.

Os endstops, ent√£o, ficaram montados da seguinte forma:

- Eixo X: Preso junto √† estrutura de MDF que segura o motor, na direita;
- Eixo Y: Preso sob a mesa, na parte de tr√°s, encostando na traseira da
  impressora quando Y = 0;
- Eixo Z: Preso a uma pe√ßa impressa, que √© baixada por um servo, possibilitando
  que o endstop fique em uma posi√ß√£o segura que n√£o atrapalhe a impress√£o;

Obs.: a pe√ßa em que o endstop √© preso foi feita na pr√≥pria impressora üòÅ.

Pre√ßo:
- Servo 9g: R$15,44

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/endstop.jpg">
    <figcaption>Conjunto de movimenta√ß√£o do endstop do eixo Z</figcaption>
  </figure>
</div>


### Suporte para a bobina do filamento

Como o projeto Graber i3 n√£o traz um suporte para o rolo de filamento, como √©
nas Sethi AiP do Lab3D, meu pai fez esse suporte com alguns restos de acr√≠lico e
ferro. Ficou legal:

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/suporte.jpg">
    <figcaption>Suporte da bobina de filamento</figcaption>
  </figure>
</div>


### Et Cetera


Pre√ßo:
- Organizadores de cabos, pacote de fita hellerman, fios, terminais, etc: R$ 20,00

### Firmware

O firmware usado √© o [Marlin](https://marlinfw.org/). Esse firmware √© f√°cil de
ser configurado apenas definindo algumas constantes em dois arquivos de
cabe√ßalho (.h), contando com uma √≥tima documenta√ß√£o oficial.

At√© o momento, precisei configurar isto:

- Baudrate: de 250000 para 115200
- Di√¢metro do filmaneto: de 3mm para 1.75mm
- Ativar o termistor da mesa
- Invers√£o da l√≥gica dos endstops
- Endstop do eixo indicando a posi√ß√£o m√°xima
- Passos/mm para cada um dos eixos
- Dimens√µes do espa√ßo de impress√£o
- PID tuning
- Configura√ß√µes do servo
- Interface em portugu√™s
- Permitir diferentes frequ√™ncias no buzzer
- Ativar cart√£o SD
- Usar display Full Graphics
- Ativar jogo brickout

Eu mantenho meu fork com as configura√ß√µes e altera√ß√µes espec√≠ficas para esta
impressora [aqui](https://github.com/lucasoshiro/Hermione3D)

### Resultado

A impressora, pronta, ficou assim:

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/hermione.jpg">
    <figcaption>!!!</figcaption>
  </figure>
</div>

Aqui est√£o algumas impress√µes feitas nela:

<div id="impressoes" style="text-align:center">
<div class="img-container" style="display:inline-block">
  <figure>
    <img src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/scrat.jpg">
    <figcaption>Scrat carregando sua noz. E cheio de suporte embaixo...</figcaption>
  </figure>
</div>

<div class="img-container" style="display:inline-block">
  <figure>
    <img src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/vaso.jpg">
    <figcaption>Vaso</figcaption>
  </figure>
</div>

<div class="img-container" style="display:inline-block">
  <figure>
    <img src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/transparente.jpg">
    <figcaption>Para aqueles que dizem ser imposs√≠vel imprimir transparente...</figcaption>
  </figure>
</div>
</div>

E por √∫ltimo, uma impress√£o que desde o come√ßo eu gostaria de fazer: o chaveiro
do Mr. FLUSP. Em maio de 2019, o Marcelo imprimiu nas impressoras Goku e Vegeta
[estes chaveiros](http://localhost:4000/lab3d/2019/08/10/maio_de_2019/), que 
ficaram muito bons. Como eu tenho um desses chaveiros, e como est√£o dispon√≠veis
[os modelos e as configura√ß√µes do slicer CuraEngine](https://gitlab.com/flusp/arts/-/tree/master/3D/mr_flusp_high_relief),
foi poss√≠vel comparar a qualidade de impress√£o com a das impressoras do Lab3D. O
resultado pode ser visto na foto a seguir, sendo que o chaveiro azul e branco √©
o feito no Lab3D e o transparente e cinza √© o que foi feito nesta impressora
3D. Nada mal para uma impressora que custou 70% a menos üòâ.

<div class="img-container">
  <figure>
    <img class="large" src="{{ site.baseurl }}/assets/images/hardware/2020-06-14-impressora_3d/mr_flusp.jpg">
    <figcaption>Chaveiros</figcaption>
  </figure>
</div>

